schema: '2.0'
stages:
  ingest:
    cmd: python -m src.data.ingest --input data/raw/water_potability.csv 
      --output data/processed/water_potability.csv
    deps:
    - path: data/raw/water_potability.csv
      hash: md5
      md5: a5eeae83d792e40da6c2f9e1eab945fc
      size: 525187
    - path: src/data/ingest.py
      hash: md5
      md5: 701e6ecbc6340ff02306777490d5b6ff
      size: 744
    outs:
    - path: data/processed/water_potability.csv
      hash: md5
      md5: a5eeae83d792e40da6c2f9e1eab945fc
      size: 525187
  preprocess:
    cmd: python -m src.data.preprocess --params configs/params.yaml
    deps:
    - path: configs/params.yaml
      hash: md5
      md5: c6922cbf61f378e82a05279898cea872
      size: 592
    - path: data/processed/water_potability.csv
      hash: md5
      md5: a5eeae83d792e40da6c2f9e1eab945fc
      size: 525187
    - path: src/data/preprocess.py
      hash: md5
      md5: e52a98b32e883b8aab047b6966ec3b9f
      size: 4158
    params:
      configs/params.yaml:
        preprocess.imputation_strategy: median
        preprocess.random_state: 42
        preprocess.scale: true
        preprocess.test_size: 0.2
        preprocess.val_size: 0.1
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: dda3ab2dab5dcc87dd44792905bca722
      size: 117899
    - path: data/processed/train.csv
      hash: md5
      md5: cd8885a8d793a252b448b19f6622725d
      size: 411740
    - path: data/processed/transformer.joblib
      hash: md5
      md5: c354d36c7f1b63506e1bdee047eb01ff
      size: 2616
    - path: data/processed/val.csv
      hash: md5
      md5: e9e37ad7d4b7435bdca5e6c8ae0c7202
      size: 58966
  train:
    cmd: python -m src.models.train --params configs/params.yaml
    deps:
    - path: configs/params.yaml
      hash: md5
      md5: c6922cbf61f378e82a05279898cea872
      size: 592
    - path: data/processed/train.csv
      hash: md5
      md5: cd8885a8d793a252b448b19f6622725d
      size: 411740
    - path: data/processed/val.csv
      hash: md5
      md5: e9e37ad7d4b7435bdca5e6c8ae0c7202
      size: 58966
    - path: src/models/train.py
      hash: md5
      md5: 85618a7e96a704ef6477a266ce227f1e
      size: 8581
    params:
      configs/params.yaml:
        model.type: xgboost
        train.cv_folds: 5
        train.n_trials: 35
    outs:
    - path: app/model_registry/model.joblib
      hash: md5
      md5: fbc5fe3ff8324449cce7392593524ca6
      size: 2371507
    - path: artifacts/metrics/train_metrics.json
      hash: md5
      md5: 8dde9cc6199af23d9684eeb4a449a4e0
      size: 418
  evaluate:
    cmd: python -m src.models.evaluate --params configs/params.yaml
    deps:
    - path: app/model_registry/model.joblib
      hash: md5
      md5: fbc5fe3ff8324449cce7392593524ca6
      size: 2371507
    - path: configs/params.yaml
      hash: md5
      md5: c6922cbf61f378e82a05279898cea872
      size: 592
    - path: data/processed/test.csv
      hash: md5
      md5: dda3ab2dab5dcc87dd44792905bca722
      size: 117899
    - path: src/models/evaluate.py
      hash: md5
      md5: fc121f031a9476f98502e9caa55c344b
      size: 2217
    params:
      configs/params.yaml:
        evaluate.threshold: 0.5
    outs:
    - path: artifacts/metrics/test_metrics.json
      hash: md5
      md5: 4bebc5838afad4c4364bf08ad9d37e6f
      size: 93
    - path: artifacts/plots/confusion_matrix.png
      hash: md5
      md5: eebe5e19eb1c7333cfe0d1616d73cc89
      size: 29402
    - path: artifacts/plots/roc_curve.png
      hash: md5
      md5: 3cf66176d7eaea59f64a47ab2b56ea4b
      size: 41394
